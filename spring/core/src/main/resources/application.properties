# ===============================================================
# CORE & PERFORMANCE
# ===============================================================
server.port=8080
spring.application.name=Reveila-Spring
# Project Loom support for high-concurrency API routing
spring.threads.virtual.enabled=true

# ===============================================================
# PERSISTENCE: JPA / H2 (Development Profile)
# ===============================================================
spring.h2.console.enabled=true
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Use 'validate' for production to ensure schema matches entities, but don't auto-update the schema
# Use 'update' for local H2 development
spring.jpa.hibernate.ddl-auto=update
# spring.jpa.hibernate.ddl-auto=validate
# Optional: Show SQL to verify tables are being created correctly
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ===============================================================
# PERSISTENCE: MONGODB (Atlas Cluster)
# ===============================================================
spring.data.mongodb.uri=mongodb+srv://cc2lee:${MONGO_PWD}@cluster0.emzc59r.mongodb.net/testdb?retryWrites=true&w=majority&appName=Cluster0
# If local, use mongodb://localhost:27017/testdb

# ===============================================================
# JSON & SERIALIZATION (Critical for EntityMapper)
# ===============================================================
# Ensure dates are readable in the Vue frontend
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null

# ===============================================================
# LOGGING & MONITORING
# ===============================================================
logging.level.org.springframework.web=INFO
logging.level.reveila.spring=DEBUG
# Useful for debugging tenant filtering
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always